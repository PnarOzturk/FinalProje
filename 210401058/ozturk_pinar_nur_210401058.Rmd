---
title: "Proje Rapor : PINAR NUR ÖZTÜRK 210401058" 
output:
  html_document:
    df_print: paged
    
lang: tr
---

# Q1 : Problem tanımı

Şirketimiz **Green Consulting**. Problemimiz *günümüzde çevre kirliliği faktörleri ile nüfus artışı arasındaki karmaşık ilişki, çevresel politikaların etkin bir şekilde yönlendirilmesini zorlaştırmaktadır. Green Consulting, bu karmaşıklığı anlamak ve çevresel politikalar üzerindeki etkisini belirleyerek sürdürülebilir bir geleceği şekillendirmeyi amaçlamaktadır.*

# Q2 : Proje Amacı
**Çevre Kirliliği ve Nüfus Artışı İlişkisinin Analizi: Sürdürülebilir Geleceği Şekillendirmek** [world-polluted-country-report](https://www.kaggle.com/datasets/rafsunahmad/world-polluted-country-report) ve [World Population Dataset](https://www.kaggle.com/datasets/iamsouravbanerjee/world-population-dataset) adlı Kaggle veri setlerini kullandığımız bu projenin temel amacı, *çevre kirliliği faktörleri ile nüfus artışı arasındaki karmaşık ilişkiyi anlamak ve bu ilişkinin çevresel politikalara etkisini belirlemektir.* Bu kapsamda, dünya genelindeki çevre kirliliği verilerini analiz ederek, çevre kirliliği ile nüfus artışı arasındaki ilişkiyi **kwantitatif** bir şekilde ortaya koymayı hedefliyoruz. Analiz etapları arasında, çevre kirliliği faktörlerini belirleme, nüfus artışı ile bu faktörler arasındaki ilişkiyi değerlendirme ve çevresel politikalara önerilerde bulunma yer almaktadır.Bu analizlerden elde edilen sonuçlar, çevre kirliliği ve nüfus artışı arasındaki ilişkinin derinlemesine anlaşılmasına katkı sağlayacak ve çevresel politikaların daha etkin bir şekilde yönlendirilmesine olanak tanıyacaktır. Ayrıca, sürdürülebilir bir geleceği şekillendirmek için önerilecek çözümler, çevresel sürdürülebilirlik alanında kritik öneme sahip olacaktır.

# Q3 : Veri seti keşifsel analizi

```{r echo=FALSE, message=FALSE, warning=FALSE}



# Veri dosyasını internetten indir ve git repo'sunun içine commitle
filename_1 <- "most-polluted-countries.csv"
filename_2 <- "world_population.csv"

# Dosyayi ithal et
library(readr)
myDF_1 <- read_csv(filename_1)
myDF_2 <-read_csv(filename_2)

```
Veri setlerinin bilgileri aşağıda verilmiştir.
  
  **World Polluted Country Report Dataset**
- **Satir sayisi** : `r nrow(myDF_1)`
- **Satir sayisi** : `r ncol(myDF_1)`


  **World Population Dataset**
- **Satir sayisi** : `r nrow(myDF_2)`
- **Satir sayisi** : `r ncol(myDF_2)`

Veri setlerinin görselleştirmesi aşağıda verilmiştir.

**World Polluted Country Report Dataset**

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF_1
```

**World Population Dataset**

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF_2
```

Veri setini incelediğimizde, problem çözümü için World Population Dataset tablomuzdan kullanacağımız  **2022 Population** sutünunu olacak. World Polluted Country Report Dataset tablomuzdan tüm sütunları kullanıp ortalama bir hava kirliliği oranı oluşturağız. Bu tablonun **Country** sütunu sayesinde diğer tablo ile ortak analiz yapılacak.
Diğer sütunlardaki değişkenlere ihtiyaç duymayacağımızdan onları sileceğiz / dikkate almayacağız.
**Ülkelerdeki kirlilik oran dağılımı**

```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF_1$pollution_2023,breaks =20)
```






**Ülkelerdeki 2022 yılı nüfusları aşağıda belirtilmiştir.**

```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF_2$`2022 Population`,breaks = 20)
```


Ülkelerdeki kirlilik oranı 5.0'dann büyük değerlere sahip ülkeler aşağıda analiz edilmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Gerekli kütüphane
if (!requireNamespace("ggplot2", quietly = TRUE)) {
  install.packages("ggplot2")
}
library(ggplot2)

filtered_data <- subset(myDF_1, `pollution_2023` > 10)

# Ülkelerin adlarını ve frekanslarını al
country_counts <- table(filtered_data$country_name)

# Veriyi veri çerçevesine dönüştür
data <- data.frame(country = names(country_counts), count = as.numeric(country_counts))

# Sütun grafik çizimi
ggplot(data, aes(x = country, y = count, fill = country)) +
  geom_bar(stat = "identity") +
  theme_minimal() +
  coord_flip() +
  labs(title = "Ülkelerde hava kirliliği oranı > 5", x = "Ülkeler", y = "Sayı")
```

2022 Nüfus oranı 41125771 büyük olan ülkeler

```{r echo=FALSE, message=FALSE, warning=FALSE} 

filtered_data <- subset(myDF_2, `2022 Population`> 41125771)


country_counts <- table(filtered_data$`2022 Population`)

pie(country_counts, main = "Ülkelerde nüfusu > 41125771", col = rainbow(length(country_counts)))


```


# Q4 : Veri seti ön işlemesi

 **World Polluted Country Report Dataset** tablosunda sadece kirlilik oranlarının bulunduğu sütun ve ülkeler sütunu ayrı bir tablo olarak ayıklandı..

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)
selected_data <- myDF_1 %>%
    select(country_name, pollution_2023)

# Oluşturulan tabloyu ekrana bastır
head(selected_data,6)
```

 **World Population Dataset** tablosunda sadece 2022 nüfuslarının bulunduğu sütun ve ülkeler sütunu ayrı bir tablo olarak ayıklandı..

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)
selected_data_2 <- myDF_2 %>%
    select(`Country/Territory`, `2022 Population`)

# Oluşturulan tabloyu ekrana bastır
head(selected_data_2,6)
```

 Tablolarda ham veri setleri okundu ve aşağıdaki adımlar uygulandı :
 *Country sütununu faktör tipine çevir*
 *Virgülle ayrılmış sayısal değerleri numeric tipine çevir*
 *Eksik veri temizleme*


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(readr)
library(dplyr)
# Ham veri setini oku
# Veri dosyasını internetten indir ve git repo'sunun içine commitle
# Örnek ön işleme adımları

# 1. Country sütununu faktör tipine çevir
selected_data$country_name <- as.factor(selected_data$country_name)
selected_data_2$`Country/Territory` <- as.factor(selected_data_2$`Country/Territory`)

# 2. Virgülle ayrılmış sayısal değerleri numeric tipine çevir
# Örneğin, AQI Value sütunu için
selected_data$pollution_2023 <- as.numeric(gsub(",", ".", selected_data$pollution_2023))

# 3. Eksik veri temizleme
# Örneğin, -999 ile belirtilmiş eksik değerleri NA'ya çevirme
selected_data_2[selected_data_2 == -999] <- NA

# 4. NA değerlerini temizleme
selected_data_2 <- na.omit(selected_data_2)

# Ön işleme sonrası veri setini ekrana bastırma
head(selected_data,6)
head(selected_data_2,6)



```

```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}
source("./Q4_tests_pinar_nur_ozturk_210401058.R")

```
**World Polluted Country Report Dataset:**
Seçilen veri setinde, sadece "country_name" (ülkeler) ve "pollution_2023" (kirlilik oranları) sütunları alınmıştır.
İlgili tablonun ilk 6 satırı aşağıda gösterilmiştir


**World Population Dataset:**
Seçilen veri setinde, sadece "Country/Territory" (ülkeler) ve "2022 Population" (2022 nüfusu) sütunları alınmıştır.
İlgili tablonun ilk 6 satırı aşağıda gösterilmiştir:

# Q5 : Veri mühendisliği

**İki tablonun ülkeler bazında işlenebilmesi için birleştirildi ve yeni oluşan tablo aşağıdaki gibi oluşmuştur.**
```{r echo=FALSE, message=FALSE, warning=FALSE}

merged_data <- selected_data %>%
  left_join(selected_data_2, by = c("country_name" = "Country/Territory"))

# Örnek gösterim (ilk 6 satır)
selected_data
selected_data_2
merged_data

```


**Şimdi, bu birleştirilmiş veri seti üzerinde bir analiz yapalım**. Birleştirilmiş veri setinin kirlilik oranları ve 2022 nüfusunu içeren sütunlarının özet istatistiklerini ve iki değişken arasındaki ilişkiyi gösteren bir scatter plot yapıldı. Bu basit analizler, veri seti içeriği hakkında bir anlayış sağlamak için kullanılabilir. Summary fonksiyonu kullanıldı.
```{r echo=FALSE, message=FALSE, warning=FALSE}

# Birleştirilmiş veri seti üzerinde basit bir analiz
summary(merged_data$pollution_2023)


```
```{r echo=FALSE, message=FALSE, warning=FALSE}

# Birleştirilmiş veri seti üzerinde basit bir analiz
summary(merged_data$`2022 Population`)


```

```{r echo=FALSE, message=FALSE, warning=FALSE}

# İki değişken arasındaki ilişkiyi gösteren bir scatter plot
plot(merged_data$`2022 Population`, merged_data$pollution_2023, main = "Nüfus ve Kirlilik İlişkisi", xlab = "2022 Nüfusu", ylab = "Kirlilik Oranı")

```
# Q6 : Veri analizi

**Birleştirilmiş veri seti üzerinde temel analiz**
```{r echo=FALSE, message=FALSE, warning=FALSE}

summary(merged_data)

```
**Kirlilik ile nüfus artışı arasındaki ilişkiyi gösteren bir scatter plot**
```{r echo=FALSE, message=FALSE, warning=FALSE}

# Kirlilik ile nüfus artışı arasındaki ilişkiyi gösteren bir scatter plot
plot(merged_data$`2022 Population`, merged_data$pollution_2023, main = "Nüfus ve Kirlilik İlişkisi", xlab = "2022 Nüfusu", ylab = "Kirlilik Oranı")

```
**Kirlilik ve nüfus artışı arasındaki korelasyon katsayısı**
```{r echo=FALSE, message=FALSE, warning=FALSE}

# Kirlilik ve nüfus artışı arasındaki korelasyon katsayısı
correlation <- cor(merged_data$`2022 Population`, merged_data$pollution_2023)
print(paste("Korelasyon Katsayısı: ", correlation))

```
**Nüfus artışı ile kirlilik arasındaki ilişkiyi lineer regresyon modeliyle inceleme**
```{r echo=FALSE, message=FALSE, warning=FALSE}

linear_model <- lm(pollution_2023 ~ `2022 Population`, data = merged_data)
summary(linear_model)
```

Bu kodlar, birleştirilmiş veri seti üzerinde temel analizler yapar. summary fonksiyonu, veri setinin özet istatistiklerini gösterir. Ayrıca, plot fonksiyonu ile nüfus artışı ve kirlilik arasındaki ilişkiyi gösteren bir scatter plot çizilir. cor fonksiyonu ile iki değişken arasındaki korelasyon katsayısı hesaplanır. Son olarak, lm fonksiyonu ile lineer regresyon modeli oluşturulur ve bu modelin özetini görüntüler.

Bu adımlar, çevresel kirlilik ile nüfus artışı arasındaki ilişkinin anlaşılmasına yönelik temel bir analiz sunar. Elde edilen istatistiksel sonuçlar ve grafikler, projenin ana hedefine ulaşmak için kritik öneme sahip olabilir ve çözüm tavsiyelerinin geliştirilmesine yardımcı olabilir.



